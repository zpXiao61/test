

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SAIL Python API &mdash; SophonInference  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AutoSplit" href="autosplit.html" />
    <link rel="prev" title="SAIL C++ API" href="sail_cpp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> SophonInference
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/abstract.html">图解 Sophon Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/install.html">Sophon Inference 安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/tools.html">常用工具介绍</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sail.html">SAIL</a></li>
<li class="toctree-l1"><a class="reference internal" href="sail_cpp.html">SAIL C++ API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SAIL Python API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sail-handle">sail.Handle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sail-iomode">sail.IOMode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sail-tensor">sail.Tensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sail-engine">sail.Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sail-bmdnn">sail.Bmdnn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sail-bmcv">sail.Bmcv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autosplit.html">AutoSplit</a></li>
<li class="toctree-l1"><a class="reference internal" href="autorunner.html">AutoRunner</a></li>
<li class="toctree-l1"><a class="reference internal" href="algokit.html">Algokit</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../demo/release_cpp.html">C++ Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo/release_python.html">Python Samples</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SophonInference</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>SAIL Python API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/module/sail_python.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sail-python-api">
<h1>SAIL Python API<a class="headerlink" href="#sail-python-api" title="Permalink to this headline">¶</a></h1>
<p>SAIL 使用 pybind11 封装了一套 python 接口, 支持python3.5。</p>
<div class="section" id="sail-handle">
<h2>sail.Handle<a class="headerlink" href="#sail-handle" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Constructor handle instance</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    tpu_id : int</span>
<span class="sd">        create handle with tpu Id</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">free_ptr</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; free handle</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="sail-iomode">
<h2>sail.IOMode<a class="headerlink" href="#sail-iomode" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Input tensors are in system memory while output tensors are in device memory</span>
<span class="n">sail</span><span class="o">.</span><span class="n">IOMode</span><span class="o">.</span><span class="n">SYSI</span>
<span class="c1"># Input tensors are in device memory while output tensors are in system memory.</span>
<span class="n">sail</span><span class="o">.</span><span class="n">IOMode</span><span class="o">.</span><span class="n">SYSO</span>
<span class="c1"># Both input and output tensors are in system memory.</span>
<span class="n">sail</span><span class="o">.</span><span class="n">IOMode</span><span class="o">.</span><span class="n">SYSIO</span>
<span class="c1"># Both input and output tensors are in device memory.</span>
<span class="n">sail</span><span class="o">.</span><span class="n">IOMode</span><span class="o">.</span><span class="n">DEVIO</span>
</pre></div>
</div>
</div>
<div class="section" id="sail-tensor">
<h2>sail.Tensor<a class="headerlink" href="#sail-tensor" title="Permalink to this headline">¶</a></h2>
<p><strong>1). Tensor</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">array_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Constructor allocates device memory of the tensor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    handle : sail.Handle</span>
<span class="sd">        Handle instance</span>
<span class="sd">    array_data : numpy.array</span>
<span class="sd">        Tensor ndarray data</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">array_shape</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Constructor allocates system memory and device memory of the tensor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    handle : sail.Handle</span>
<span class="sd">        Handle instance</span>
<span class="sd">    array_shape : tuple</span>
<span class="sd">        Tensor init shape</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>2). shape</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">shape</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Get shape of the tensor.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tensor_shape : list</span>
<span class="sd">        Shape of the tensor</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>3). sync_s2d</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sync_s2d</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Copy data from system memory to device memory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">sync_s2d</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Copy data from system memory to device memory with specified size.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    size : int</span>
<span class="sd">        Byte size to be copied</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4). sync_d2s</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sync_d2s</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Copy data from device memory to system memory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">sync_d2s</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Copy data from device memory to system memory with specified size.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    size : int</span>
<span class="sd">        Byte size to be copied</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="sail-engine">
<h2>sail.Engine<a class="headerlink" href="#sail-engine" title="Permalink to this headline">¶</a></h2>
<p><strong>1). Engine</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">bmodel_dir</span><span class="p">,</span> <span class="n">tpus</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Constructor using default input shapes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_dir : str</span>
<span class="sd">        The path of algorithm bmodel</span>
<span class="sd">    tpus : str</span>
<span class="sd">        Ids of TPUS to be used, split by comma. Eg.: &quot;0,1&quot; for</span>
<span class="sd">        TPU 0 and TPU 1, &quot;all&quot; for all available TPUs</span>
<span class="sd">    mode : sail.IOMode</span>
<span class="sd">        Specify the input/output tensors are in system memory</span>
<span class="sd">        or device memory</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">bmodel_file</span><span class="p">,</span> <span class="n">bmodel_byte_size</span><span class="p">,</span> <span class="n">tpus</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Constructor using default input shapes with bmodel which</span>
<span class="sd">    loaded in memory</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bmodel_file : file</span>
<span class="sd">        The file stream of bmodel</span>
<span class="sd">    bmodel_byte_size : int</span>
<span class="sd">        Bmodel byte size</span>
<span class="sd">    tpus : str</span>
<span class="sd">        Ids of TPUS to be used, split by comma. Eg.: &quot;0,1&quot; for</span>
<span class="sd">        TPU 0 and TPU 1, &quot;all&quot; for all available TPUs</span>
<span class="sd">    mode : sail.IOMode</span>
<span class="sd">        Specify the input/output tensors are in system memory</span>
<span class="sd">        or device memory</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>2). get_graph_names</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_graph_names</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Get all graph names in the loaded context.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    graph_names : list</span>
<span class="sd">        Graph names list in loaded context</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>3). get_input_names</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_input_names</span><span class="p">(</span><span class="n">graph_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get all input tensor names of the specified graph.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph_name : str</span>
<span class="sd">        Specified graph name</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    input_names : list</span>
<span class="sd">        All the input tensor names of the graph</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4). get_output_names</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_output_names</span><span class="p">(</span><span class="n">graph_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get all output tensor names of the specified graph.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph_name : str</span>
<span class="sd">        Specified graph name</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    input_names : list</span>
<span class="sd">        All the output tensor names of the graph</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>5). get_handle</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_handle</span><span class="p">(</span><span class="n">tpu_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get Handle instance of the specified tpu_id.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    tpu_id : int</span>
<span class="sd">        Specified tpu Id</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    handle : sail.Handle</span>
<span class="sd">        Get the bm handle instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>6). get_max_input_shapes</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_max_input_shapes</span><span class="p">(</span><span class="n">graph_name</span><span class="p">,</span> <span class="n">is_total</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get max shapes of input tensors in a graph.</span>
<span class="sd">    For static models, the max shape is the static shape and it should not be</span>
<span class="sd">    changed. While for dynamic models, the tensor shape should be smaller than</span>
<span class="sd">    or equal to the max shape.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph_name : str</span>
<span class="sd">        The specified graph name</span>
<span class="sd">    is_total : bool</span>
<span class="sd">        True for total specified tpus; False for a single one</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    max_shapes : dict {str : list}</span>
<span class="sd">        The max shape of the input_tensors</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>7). get_input_shape</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_input_shape</span><span class="p">(</span><span class="n">graph_name</span><span class="p">,</span> <span class="n">tensor_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get the shape of an input tensor in a graph.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph_name : str</span>
<span class="sd">        The specified graph name</span>
<span class="sd">    tensor_name : str</span>
<span class="sd">        The specified input tensor name</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tensor_shape : list</span>
<span class="sd">        The shape of the tensor</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>8). get_output_shape</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_output_shape</span><span class="p">(</span><span class="n">graph_name</span><span class="p">,</span> <span class="n">tensor_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get the shape of an output tensor in a graph.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph_name : str</span>
<span class="sd">        The specified graph name</span>
<span class="sd">    tensor_name : str</span>
<span class="sd">        The specified output tensor name</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tensor_shape : list</span>
<span class="sd">        The shape of the tensor</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>9). process</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">graph_name</span><span class="p">,</span> <span class="n">input_tensors</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Do network inference</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    graph_name : str</span>
<span class="sd">        The specified graph name</span>
<span class="sd">    input_tensors : dict {str : numpy.array}</span>
<span class="sd">        Data of all input tensors in system memory</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="sail-bmdnn">
<h2>sail.Bmdnn<a class="headerlink" href="#sail-bmdnn" title="Permalink to this headline">¶</a></h2>
<p><strong>1). Bmdnn</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Bmdnn constructor</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    handle : sail.Handle</span>
<span class="sd">        handle instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>2). sigmoid</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sigmoid</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Sigmoid operation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input tensor</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output tensor</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>3). tanh</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">tanh</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Tanh operation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input tensor</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output tensor</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4). softmax</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">softmax</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Softmax operation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input tensor</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output output</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>5). relu</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">relu</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Relu operation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input tensor</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output tensor</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>6). matmul</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">matmul</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">bias</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Matrix multiplication plus bias.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input tensor</span>
<span class="sd">    weight : sail.Tensor</span>
<span class="sd">        Weight tensor</span>
<span class="sd">    bias : sail.Tensor</span>
<span class="sd">        Bias tensor</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>7). add</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">input_a</span><span class="p">,</span> <span class="n">input_b</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Addition operation, output = input_a + input_b.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_a : sail.Tensor</span>
<span class="sd">        Input tensor A</span>
<span class="sd">    input_b : sail.Tensor</span>
<span class="sd">        Input tensor B</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>8). sub</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sub</span><span class="p">(</span><span class="n">input_a</span><span class="p">,</span> <span class="n">input_b</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Subtraction operation, output = input_a - input_b.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_a : sail.Tensor</span>
<span class="sd">        Input tensor A</span>
<span class="sd">    input_b : sail.Tensor</span>
<span class="sd">        Input tensor B</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>9). mul</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="n">input_a</span><span class="p">,</span> <span class="n">input_b</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Multiplication operation, output = input_a * input_b.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_a : sail.Tensor</span>
<span class="sd">        Input tensor A</span>
<span class="sd">    input_b : sail.Tensor</span>
<span class="sd">        Input tensor B</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>10). div</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="n">input_a</span><span class="p">,</span> <span class="n">input_b</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Division operation, output = input_a / input_b.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_a : sail.Tensor</span>
<span class="sd">        Input tensor A</span>
<span class="sd">    input_b : sail.Tensor</span>
<span class="sd">        Input tensor B</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="sail-bmcv">
<h2>sail.Bmcv<a class="headerlink" href="#sail-bmcv" title="Permalink to this headline">¶</a></h2>
<p><strong>1). Bmcv</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Bmcv constructor</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    handle : sail.Handle</span>
<span class="sd">        handle instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>2). resize</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Resize an image with interpolation of INTER_NEAREST.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input image data</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>3). crop</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">crop</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">left</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Crop an image.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input image data</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>
<span class="sd">    top : int</span>
<span class="sd">        Start point most top from original image</span>
<span class="sd">    left : int</span>
<span class="sd">        Start point most left from original image</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4). resize_norm</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">resize_norm</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">scale_b</span><span class="p">,</span> <span class="n">bias_b</span><span class="p">,</span>
                <span class="n">scale_g</span><span class="p">,</span> <span class="n">bias_g</span><span class="p">,</span> <span class="n">scale_r</span><span class="p">,</span> <span class="n">bias_g</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Resize an image and do normalizition.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input image data</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>
<span class="sd">    scale_b : float</span>
<span class="sd">        Scale factor for channel b</span>
<span class="sd">    bias_b : float</span>
<span class="sd">        Bias for channel b</span>
<span class="sd">    scale_g : float</span>
<span class="sd">        Scale factor for channel g</span>
<span class="sd">    bias_g ： float</span>
<span class="sd">        Bias for channel g</span>
<span class="sd">    scale_r : float</span>
<span class="sd">        Scale factor for channel r</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>5). transpose</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Transpose an image.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input image data</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>6). bgrsplit</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bgrsplit</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert packed BGR image data to BGR planar data format.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input : sail.Tensor</span>
<span class="sd">        Input image data</span>
<span class="sd">    output : sail.Tensor</span>
<span class="sd">        Output image data</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    status : int</span>
<span class="sd">        0 for success and other for failure</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autosplit.html" class="btn btn-neutral float-right" title="AutoSplit" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sail_cpp.html" class="btn btn-neutral float-left" title="SAIL C++ API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Sophon

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>